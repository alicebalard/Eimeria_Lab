row.names = F, quote = F )
read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
ourDesign <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep(0:11, each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 2, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep(0:ndays-1, each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 2, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
ndays = 26
data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep(0:ndays-1, each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
EH_ID = rep(designTable$EH_ID, ndays)
EH_ID
length(EH_ID)
length(EH_ID) / 26
dpi = rep(0:(ndays-1), each=nrow(designTable))
0:(ndays-1)
rep(0:(ndays-1)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep((0:ndays-1), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 2, paste, collapse = ""), nrow(recordTable))
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep((0:ndays-1), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 2, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep((0:ndays-1), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 3, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep((0:ndays-1), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 4, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep((0:ndays-1), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
# labels = sample(combn(LETTERS, 4, paste, collapse = ""), nrow(recordTable))
# #recordTable$labels = labels
# recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
ndays = 26
EH_ID = rep(designTable$EH_ID, ndays)
dpi = rep(0:(ndays-1), each=nrow(designTable))
data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep(0:(ndays-1), each=nrow(designTable)))
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep(0:(ndays-1), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
# labels = sample(combn(LETTERS, 4, paste, collapse = ""), nrow(recordTable))
# #recordTable$labels = labels
# recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
dpi = rep(0:(ndays-1), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 4, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
View(recordTableExpe009)
daysOfWeightOrFeccol <- c(0,2,4,7,9,11,14,16,18,21,23,25)
ndays <- length(daysOfWeightOrFeccol)
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
# recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
#                          dpi = rep(0:(ndays-1), each=nrow(designTable)),
#                          weight = "",
#                          weight_dpi0 = "",
#                          weightloss = "",
#                          weightRelativeToInfection = "",
#                          fecweight = "",
#                          oocyst_sq1 = "",
#                          oocyst_sq2 = "",
#                          oocyst_sq3 = "",
#                          oocyst_sq4 = "",
#                          oocyst_mean = "",
#                          dilution = "",
#                          OPG = "")
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, 12),
dpi = rep(c(0,2,4,7,9,11,14,16,18,21,23,25), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 4, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
daysOfWeightOrFeccol <-
ndays <- length(daysOfWeightOrFeccol)
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
# recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
#                          dpi = rep(0:(ndays-1), each=nrow(designTable)),
#                          weight = "",
#                          weight_dpi0 = "",
#                          weightloss = "",
#                          weightRelativeToInfection = "",
#                          fecweight = "",
#                          oocyst_sq1 = "",
#                          oocyst_sq2 = "",
#                          oocyst_sq3 = "",
#                          oocyst_sq4 = "",
#                          oocyst_mean = "",
#                          dilution = "",
#                          OPG = "")
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, 12),
dpi = rep(c(0,2,4,7,9,11,14,16,18,21,23,25), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 4, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
View(recordTableExpe009)
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
# recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
#                          dpi = rep(0:(ndays-1), each=nrow(designTable)),
#                          weight = "",
#                          weight_dpi0 = "",
#                          weightloss = "",
#                          weightRelativeToInfection = "",
#                          fecweight = "",
#                          oocyst_sq1 = "",
#                          oocyst_sq2 = "",
#                          oocyst_sq3 = "",
#                          oocyst_sq4 = "",
#                          oocyst_mean = "",
#                          dilution = "",
#                          OPG = "")
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, 12),
dpi = rep(c(0,2,4,7,9,11,14,16,18,21,23,25), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 2, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
designTableExpe009 <- read.csv("../data/2_designTables/Exp009_CRYPTO_design.csv")
recordTableExpe009 <- makeRecordTable(designTableExpe009, 1234, ndays = 26)
combn(LETTERS, 2, paste, collapse = "")
View(recordTableExpe009)
write.csv(recordTableExpe009, "../data/3_recordingTables/Exp009_CRYPTO.csv",
row.names = F, quote = F)
?magrittr
library(RCurl)
OV <- read.csv("./Eimeria_Lab_overview.csv")
OV <- read.csv(text = getURL("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/Eimeria_Lab_overview.csv"))
View(OV)
loadFromGH <- function(URL){
if(url.exists(URL)){
U <- getURL(URL)
read.csv(text = U)
} else {
message("URL \"", URL, "\" does not exist")
}
}
## create a list of dataframes for the weight data subsetting for only
## the experiments with the E139 used
E139W <- lapply(OV[OV$E139, "weight"], loadFromGH)
View(E139W)
View(OV)
View(E139W)
## URL for an empty cell in the table does not exist, that's fine, all
## others are read. Remove the empty element in the list
E139W <- E139W[!unlist(lapply(E139W, is.null))]
Reduce(intersect, lapply(E139W, colnames))
View(E139W)
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
# recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
#                          dpi = rep(0:(ndays-1), each=nrow(designTable)),
#                          weight = "",
#                          weight_dpi0 = "",
#                          weightloss = "",
#                          weightRelativeToInfection = "",
#                          fecweight = "",
#                          oocyst_sq1 = "",
#                          oocyst_sq2 = "",
#                          oocyst_sq3 = "",
#                          oocyst_sq4 = "",
#                          oocyst_mean = "",
#                          dilution = "",
#                          OPG = "")
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, 12),
dpi = rep(c(0,2,4,7,9,11,14,16,18,21,23,25), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
weightRelativeToInfection = "",
fecweight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 2, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
View(makeRecordTable)
#                          weightloss = "",
#                          weightRelativeToInfection = "",
#                          fecweight = "",
#                          oocyst_sq1 = "",
#                          oocyst_sq2 = "",
#                          oocyst_sq3 = "",
#                          oocyst_sq4 = "",
#                          oocyst_mean = "",
#                          dilution = "",
#                          OPG = "")
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, 12),
dpi = rep(c(0,1,2,3,4,5,6,7,8,9,10,11,12), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
relative_weight = "",
feces_weight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
makeRecordTable <- function(designTable, myseed, ndays = 12){
set.seed(myseed)
# recordTable = data.frame(EH_ID = rep(designTable$EH_ID, ndays),
#                          dpi = rep(0:(ndays-1), each=nrow(designTable)),
#                          weight = "",
#                          weight_dpi0 = "",
#                          weightloss = "",
#                          weightRelativeToInfection = "",
#                          fecweight = "",
#                          oocyst_sq1 = "",
#                          oocyst_sq2 = "",
#                          oocyst_sq3 = "",
#                          oocyst_sq4 = "",
#                          oocyst_mean = "",
#                          dilution = "",
#                          OPG = "")
recordTable = data.frame(EH_ID = rep(designTable$EH_ID, 12),
dpi = rep(c(0,1,2,3,4,5,6,7,8,9,10,11,12), each=nrow(designTable)),
weight = "",
weight_dpi0 = "",
weightloss = "",
relative_weight = "",
feces_weight = "",
oocyst_sq1 = "",
oocyst_sq2 = "",
oocyst_sq3 = "",
oocyst_sq4 = "",
oocyst_mean = "",
dilution = "",
OPG = "")
labels = sample(combn(LETTERS, 3, paste, collapse = ""), nrow(recordTable))
#recordTable$labels = labels
recordTable = cbind(labels = labels, recordTable)
return(recordTable)
}
###### data for Expe009
pathToInfoTable <- "~/GitHub/Eimeria_Lab/data/Experimental_design/E7_112018_Eim_DESIGN.csv"
lastEH_ID <- "LM0226"
infection_isolate <- c(rep("E64", 4), rep("E88", 4))
infoTable = read.csv(pathToInfoTable)
Nmice = nrow(infoTable)
#Give EH_IDs
num = as.numeric(sub("LM", "", lastEH_ID))
num = num + (1:(Nmice))
EH_ID = paste0("LM", sprintf("%04d", num))
#Assign infection isolate
designTable <- data.frame(infection_isolate = infection_isolate,
EH_ID= EH_ID)
54/2
infection_isolate <- c(rep("E64", 27), rep("E88", 27))
#Assign infection isolate
designTable <- data.frame(infection_isolate = infection_isolate,
EH_ID= EH_ID)
#Spread names randomly among mice
infoTable$EH_ID <- sample(EH_ID)
#merge full stuff
finaldesignTable <- merge(infoTable, designTable)
View(designTable)
# Load information table
infoTable = read.csv(text = getURL("https://raw.githubusercontent.com/derele/Eimeria_Lab/master/data/Experimental_design/E7_112018_Eim_DESIGN.csv"))
lastEH_ID <- "LM0226"
infection_isolate <- c(rep("E64", 27), rep("E88", 27))
# number of mice
Nmice = nrow(infoTable)
#Give EH_IDs
num = as.numeric(sub("LM", "", lastEH_ID))
num = num + (1:(Nmice))
EH_ID = paste0("LM", sprintf("%04d", num))
#Assign infection isolate
designTable <- data.frame(infection_isolate = infection_isolate,
EH_ID= EH_ID)
#Spread names randomly among mice
infoTable$EH_ID <- sample(EH_ID)
#merge full stuff
finaldesignTable <- merge(infoTable, designTable)
View(finaldesignTable)
View(designTable)
View(finaldesignTable)
